<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>.player</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">-->
        <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>



        <div style="width: 600px; margin: 0 auto;">
            <br>
            <br>
            <h1>.player</h1>
            <br>
            <br>
            <div style="width: 226px; margin: 0 auto;">


                <section class="player player--loading">
                    <button class="player__handler" type="button">
                        <img class="player__angle" src="../symbols/16-angle-down.svg" width="16" height="16" alt="">
                        Expand
                    </button>
                    <h2 class="player__heading">
                        Now playing
                    </h2>
                    <img class="player__preview"
                         srcset="../temp/brandon-bell-when-the-air@2x.jpg 2x"
                         src="../temp/brandon-bell-when-the-air.jpg"
                         width="174"
                         height="99"
                         alt=""
                    >
                    <div class="player__song ellipsis">
                        Brandon Bell
                    </div>
                    <div class="player__artist ellipsis">
                        “When the air sings of summer” from The Old Maid and the Thief
                    </div>
                    <div class="player__wave">
                        <div class="player__indicator">
                            <div class="loading loading--inverted">Loading</div>
                        </div>
                        <div class="player__progress">
                            <!-- Wave Surf here -->
                        </div>
                    </div>
                    <div class="player__controls">
                        <button class="player__action player__action--bookmark" type="button">
                            <img class="player__icon" src="../symbols/16-bookmark.svg" width="16" height="16" alt="">
                        </button>
                        <button class="player__action player__action--disabled player__action--backward" type="button">
                            <img class="player__icon" src="../symbols/16-backward.svg" width="16" height="16" alt="">
                        </button>
                        <button class="player__action player__action--play player__action--disabled" type="button" style="background-image: url(../temp/brandon-bell-when-the-air.jpg);">
                            <img class="player__icon player__icon--play" src="../symbols/16-play.svg" width="16" height="16" alt="">
                            <img class="player__icon player__icon--pause" src="../symbols/16-pause.svg" width="16" height="16" alt="">
                            <div class="player__visualization playback">
                                <div class="playback__bar"></div>
                                <div class="playback__bar"></div>
                                <div class="playback__bar"></div>
                                <div class="playback__bar"></div>
                                <div class="playback__bar"></div>
                            </div>
                        </button>
                        <button class="player__action player__action--forward" type="button">
                            <img class="player__icon" src="../symbols/16-forward.svg" width="16" height="16" alt="">
                        </button>
                        <button class="player__action player__action--shuffle" type="button">
                            <img class="player__icon" src="../symbols/16-shuffle.svg" width="16" height="16" alt="">
                        </button>
                    </div>
                </section>


            </div>


            <br>
            <h3>Wave</h3>
            <p>
                Use Wave Surf plugin: <a href="https://wavesurfer-js.org/">https://wavesurfer-js.org/</a> to create wave map
            </p>
            <br>
            <h3>Init</h3>
            <p>
                Init it inside <b>.player__progress</b>
            </p>
            <p>
                Init with following parameters:
            </p>
<pre>
var wavesurfer = WaveSurfer.create({
    container: '.player__progress',
    barWidth: 1,
    barGap: 2,
    height: '49',
    waveColor: '#FFFFFF',
    progressColor: '#BFD7E3',
    cursorColor: '#FFFFFF'
});
</pre>

            <br>
            <h3>Ready state</h3>
            <p>
                Once init it will start loading first song. When song is loaded parsed and the wave peaks created (on <b>ready</b> event)
                please add <b>.player--ready</b> class. This will show wave on the screen
                because by default it was hidden via <b>opacity: 0</b>.
            </p>
            <p>
                It has to be done because wave appears and disappears by itself anyway and does it uncontrollable.
                To take control over the situation we just toggle opacity on the parental div. With it we can
                add transition, horizontal background line (not a part of the player) and so on.
            </p>


            <br>
            <h3>Loading state</h3>
            <p>
                When song (or library itself) is being downloaded please add <b>.player--loading</b>.
                It will show loading indicator. You want to load page with this class added by default.
            </p>
            <p>
                At some point of view this loading case is opposite to <b>.player--ready</b> and one of them could be enough.
                You can use <b>ready</b> even to detect both cases.
                But whole thing is quite complicated so lets just in case separate these cases to be more straightforward.
                Many things in CSS relate to them.
            </p>


            <br>
            <h3>Play and Pause states</h3>

            <p>
                In addition to the pair of <b>.player--loading</b> and <b>.player--ready</b> we have another pair of classes:
                <b>.player--playing</b> and <b>.player--paused</b>. Use <b>play</b> and <b>pause</b> events to catch related cases.
                Again, one of them could be enough but just for simplicity lets have both. There is a complicated scheme
                of icons swapping in CSS related to these classes.
            </p>


            <br>
            <h3>Disabled player controls</h3>

            <p>
                Use <b>.player__action--disabled</b> to disable player controls when needed. For example when new track
                is being loaded you should disable play button. When there are no tracks in the playlist you shold disable
                next button. And so on.
            </p>

            <br>
            <h3>Toggle bookmark and shuffle</h3>

            <p>
                When song is bookmarked please change:<br>
                <b>16-bookmark</b> to <b>16-bookmarked</b>
                <br>And same for shuffle:
                <br><b>16-shuffle</b> to <b>16-shuffled</b>
            </p>

            <p>
                You can swap icons in the sprite by updating <b>href</b> attribute of <b>use</b> tag inside of svg icon:
                <br><b>$('use').attr("xlink:href", "path/to/symbols.svg#16-bookmark")</b>
                <br><b>$('use').attr("xlink:href", "path/to/symbols.svg#16-bookmarked")</b>
                <br>and:
                <br><b>$('use').attr("xlink:href", "path/to/symbols.svg#16-shuffle")</b>
                <br><b>$('use').attr("xlink:href", "path/to/symbols.svg#16-shuffled")</b>
            </p>


            <br>
            <br>
            <br>
            <h2>Collapsed case</h2>
            <p>
                Just add <b>.player--collapsed</b> to change player layout. Some parts of player of it will be hidden
                while another parts will be repositioned.
            </p>
            <p>
                Most of complications will happen inside of play button. Please note that
                is is still similar <b>.player__action--play</b> button that was at the bottom of the player.
                So all JS events and other code pieces related to that button will work here too.
                No actions required.
            </p>
            <p>
                Only need to make sure play button has background image like so:
                <b>style="background-image: url(../temp/brandon-bell-when-the-air.jpg);"</b>
                from the very beginning. Don't need to provide retina version here or cut another sizes. Just
                use same images as in the <b>.player__preview</b>. It's about the needed size.
            </p>
            <h3>Collapse when?</h3>
            <p>
                To add <b>.player--collapsed</b> class please catch a click on <b>.player__handler</b> button.
            </p>
            <p>
                To remove <b>.player--collapsed</b> when player is already collapsed:
                <br>1) Catch the same click on <b>.player__handler</b> button.
                <br>2) Catch the click on whole player and check if:
                <br><b>!$(event.target).closest('.player__handler, .player__action--play').length</b>
            </p>



            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
        </div>



        <!-- Scripts -->
        <script src="../vendors/jquery/jquery-3.6.0.min.js"></script>
        <script src="../vendors/magnific-popup/dist/jquery.magnific-popup.min.js"></script>
        <script src="../vendors/outline/outline.js"></script>
        <script src="../vendors/wavesurfer/wavesurfer.js"></script>
        <script src="../scripts/_operations.js"></script>
        <script src="../scripts/_profile.js"></script>
        <script src="../scripts/_mfp.js"></script>
        <script src="../scripts/_search.js"></script>
        <script src="../scripts/_carousel.js"></script>
        <script src="../scripts/_player.js"></script>
        <script src="../scripts/_updates.js"></script>
        <script src="../scripts/_dash-side.js"></script>
        <script src="../scripts/_happening.js"></script>
        <script src="../scripts/_input.js"></script>


    </body>
</html>
